<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0047)http://www.wavecn.com/_articles/insertvalue.htm -->
<HTML><HEAD><TITLE>WaveCN.com 世纪音频 - 技术文章 - 插值（内插）</TITLE><!-- #BeginTemplate "/Templates/wavecn.dwt" --><!-- DW6 --><!-- #BeginEditable "doctitle" -->
<META content=插值 name=keywords>
<META content="Some technique about graphics process，图象处理技术，插值处理" 
name=description><!-- #EndEditable --><LINK href="../wavecn.ico" 
rel="shortcut icon">
<META http-equiv=Content-Type content="text/html; charset=gb2312" ?><LINK 
href="插值（内插）.files/default.css" type=text/css rel=stylesheet>
<META content="MSHTML 6.00.2800.1170" name=GENERATOR></HEAD>
<BODY bgColor=#ffffff><A name=pagetop></A>
<TABLE cellSpacing=0 cellPadding=0 width=760 align=center border=0>
  <TBODY>
  <TR>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=204 border=0></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=468 border=0></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=1 border=0></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=5 border=0></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=77 border=0></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=5 border=0></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD colSpan=6><IMG height=18 src="插值（内插）.files/r1_c1.gif" width=760 
      border=0 name=r1_c1></TD>
    <TD><IMG height=18 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD rowSpan=11><IMG height=93 src="插值（内插）.files/r2_c1.gif" width=204 
      border=0 name=r2_c1></TD>
    <TD colSpan=2 rowSpan=6>
      <DIV align=center><NOLAYER><IFRAME marginWidth=0 marginHeight=0 
      src="插值（内插）.files/ad.htm" frameBorder=0 width=468 scrolling=no 
      height=60></IFRAME></NOLAYER></DIV></TD>
    <TD rowSpan=11><IMG height=93 src="插值（内插）.files/r2_c4.gif" width=5 
      border=0 name=r2_c4></TD>
    <TD align=middle rowSpan=2><A 
      href="javascript:window.external.addFavorite('http://www.wavecn.com/','WaveCN%20世纪音频')">加入收藏夹</A></TD>
    <TD rowSpan=11><IMG height=93 src="插值（内插）.files/r2_c6.gif" width=5 
      border=0 name=r2_c6></TD>
    <TD><IMG height=1 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD><IMG height=14 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD><IMG height=9 src="插值（内插）.files/r4_c5.gif" width=77 border=0 
      name=r4_c5></TD>
    <TD><IMG height=9 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD align=middle><A href="http://www.wavecn.com/main.html">English</A></TD>
    <TD><IMG height=15 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD><IMG height=10 src="插值（内插）.files/r6_c5.gif" width=77 border=0 
      name=r6_c5></TD>
    <TD><IMG height=10 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD align=middle rowSpan=2><A href="http://www.wavecn.com/">中文版本</A></TD>
    <TD><IMG height=12 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD colSpan=2 rowSpan=2><IMG height=6 src="插值（内插）.files/r8_c2.gif" 
      width=469 border=0 name=r8_c2></TD>
    <TD><IMG height=3 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD rowSpan=2><IMG height=10 src="插值（内插）.files/r9_c5.gif" width=77 
      border=0 name=r9_c5></TD>
    <TD><IMG height=3 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD align=middle colSpan=2 rowSpan=2><A 
      href="http://www.wavecn.com/index.html">首页</A> <A 
      href="http://www.wavecn.com/_wavecn/wavecn.htm"><FONT 
      color=#ff0000>WaveCN专栏</FONT></A> <A 
      href="http://www.wavecn.com/_articles/articles.htm">技术文章</A> <A 
      href="http://www.wavecn.com/_data/data.htm">资料下载</A> <A 
      href="http://www.wavecn.com/_samples/samples.htm">音效下载</A> <A 
      href="http://www.wavecn.com/_software/software.htm">软件下载</A> <A 
      href="http://www.wavecn.com/_link/link.htm">相关连接</A></TD>
    <TD><IMG height=7 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD align=middle><A href="http://www.wavecn.com/about.htm">关于本站</A></TD>
    <TD><IMG height=15 src="插值（内插）.files/s.gif" width=1 border=0></TD></TR>
  <TR>
    <TD colSpan=2><IMG height=4 src="插值（内插）.files/r12_c2.gif" width=469 
      border=0 name=r12_c2></TD>
    <TD><IMG height=4 src="插值（内插）.files/r12_c5.gif" width=77 border=0 
      name=r12_c5></TD>
    <TD><IMG height=4 src="插值（内插）.files/s.gif" width=1 
border=0></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=760 align=center border=0>
  <TBODY>
  <TR bgColor=#0000cc>
    <TD colSpan=4 height=5></TD>
    <TD width=1 bgColor=#ffffff></TD></TR>
  <TR height=20>
    <TD width=5 bgColor=#0000cc></TD>
    <TD align=right width=413 bgColor=#6666ff><FONT 
      color=#ffffff>■本站不定期更新，建议订阅本站软件和内容更新的邮件通知：</FONT> </TD>
    <TD width=336 bgColor=#6666ff>
      <SCRIPT language=JavaScript src="插值（内插）.files/form.php"></SCRIPT>
    </TD>
    <TD width=5 bgColor=#0000cc></TD>
    <TD width=1 bgColor=#ffffff></TD></TR>
  <TR bgColor=#0000cc>
    <TD colSpan=4 height=5></TD>
    <TD width=1 bgColor=#ffffff></TD></TR></TBODY></TABLE><!-- #BeginEditable "content" -->
<TABLE borderColor=#00cccc height=209 cellSpacing=0 cellPadding=0 width=760 
align=center border=1>
  <TBODY>
  <TR bgColor=#ffcccc>
    <TD bgColor=#ffffcc height=25><FONT color=#ff0000>■</FONT>技术文章-&gt;插值（内插） 
    </TD></TR>
  <TR>
    <TD>
      <H2 
      align=center>插值（内插）</H2><BR>　　插值是确定某个函数在两个采样值之间的数值时采用的运算过程。插值通常是利用曲线拟合的方法，通过离散的输入采样点建立一个连续函数，用这个重建的函数便可以求出任意位置处的函数值。这样便可以不受仅在采样点处抽取输入信号值的限制。我们知道，对有限带宽的信号采样会产生无限带宽信号，插值过程正好相反，它通过对离散信号作低通滤波处理，减少了信号的带宽。插值函数对采样数值的平滑作用，恢复了在采样过程中丢失的信息。因而插值可以看做是采样的逆过程。<BR>　　对于等间隔采样数据，插值可以表示为：<BR>
      <CENTER><IMG height=55 alt="Function 1" 
      src="插值（内插）.files/insertvalue2.gif" width=187 border=0> 
      </CENTER>　　其中h为插值核，Ck为权系数，卷积对K个数据作处理。上面的方程将插值用卷积操作来表示，在实际应用中，h总是对称的，即有h(x)=h(-x)，Ck即为采样值。<BR>　　插值核的性质可以通过其在频率域的特性来评估。理想的插值核在带通区具有单位增益，在带阻区具有０增益。因而可以有效地通过和抑制不同频率的信号成分。<BR>　　理想滤波器在空间域中都具有很宽的拓区，故称为无限脉冲响应滤波器（IIR），但这种滤波器在实际中是无法实现的。仅能在一定程度上近似实现这类滤波器。<BR><BR>　　另一类可实现的滤波器常称为有限脉冲响应滤波器(FIR)，FIR滤波器的每一个输出值都是其邻域有限输入元素的加权和。FIR滤波器在信号与图象处理中具有广泛应用。常用的FIR滤波器有盒式、三角、三次卷积B样条及加窗Sinc函数等。它们都可以作为插值函数的插值核来使用。下面列举几种比较有效的插值核：<BR><BR>1、最近邻域法<BR>　　这是最简单的算法，每一个输出像素都赋给输入图象中与其最邻近的采样点的值。<BR>
      <CENTER><IMG height=21 alt="Function 2" 
      src="插值（内插）.files/insertvalue3.gif" width=115 align=middle border=0> 
      &nbsp;&nbsp;&nbsp; <IMG height=44 alt="Function 3" 
      src="插值（内插）.files/insertvalue4.gif" width=210 align=middle border=0> 
      </CENTER>2、线形插值<BR>
      <CENTER><IMG height=21 alt="Function 4" 
      src="插值（内插）.files/insertvalue5.gif" width=132 align=middle border=0> 
      &nbsp;&nbsp;&nbsp; <IMG height=54 alt="Function 5" 
      src="插值（内插）.files/insertvalue6.gif" width=268 align=middle border=0> 
      </CENTER>3、Sinc<BR>　　在这里介绍的是Hann/Hamming窗：<BR>
      <CENTER><IMG height=78 alt="Function 6" 
      src="插值（内插）.files/insertvalue7.gif" width=491 border=0> 
      </CENTER>　　其中N为窗口下的采样点数。当<IMG height=16 alt="<I>a</I>" 
      src="插值（内插）.files/insertvalue1.gif" width=18 align=absMiddle 
      border=0>取0.5时，称HANN窗，当取0.54时，称HAMMING窗。<BR>　　这里没有介绍三次样条，是因为排版和理论上的原因，但是提供了一个三次样条的范例程序。程序可能有错，请勿见怪。<BR>
      <HR>
      下面是程序 
      <H2>三次样条插值范例程序</H2><PRE><FONT face="Courier New, Courier, mono">
// Name : ispline-gen ( ).
// Function: Interpolating cubic spline function for irregularly-spaced poinis.
// Parametcrs: Y1 : is a list of irregular data points (len1 entries).
// X1 : x-coordinaies of the adta siored in Y1.
// Y2 : Cubic spline sampled according io X2 (len2 entries).
// Calls : getYD_gen ( ) .

void ispline_gen(double x X1 ,double x Y1 ,int len1 ,doublc &amp; X2 ,double x Y2 ,int len2)
{
  int i, j;
  double * YD, A0, A1, A2, A3, x, dx, dy, p1, p2, p3;
  YD = (double x ) calloc (len1 , sizeof(double) ) ;
  getYD_ gen ( X1 , Y1 , YD , len1 ) ;
  / * error checking * /
  if (X2 [0]&lt;X1 [o] | | X2 [len2 - 1]&gt;X1 [len1 - 1 ] )
    {
    printf ("out of range");
    exit ( 0 ) ;
    }
  p3 = X2 [0]-1 ;
  for (i = j = 0 ; i&lt;len2 ; i + + )
    {
    p2 = X2[i] ;
    if(p2&gt;p3)
      {
      for ( ; j&lt;ilen1 &amp;&amp; p2 &gt; X1 [j] ; j + + )
        if(p2&lt;X1 [i] ) j-- ;

      p1 = X1 [j];
      p3 = X1 [j + 1];
      dx = 1.0 / (X 1 [j + 1 ]-X1 [i] ) ;
      dy = (Y1 [j + 1]-Y1 [j]) * dx ;
      A0 = Y1 [i] ;
      A1 = YD[j] ;
      A2=dx * (3.0 * dy-2. 0 * YD[j]-YD[j+ 1]) ;
      A3=dx * dx * (-2.0 * dy+YD[i]+YD[j+1]) ;
      }
    x = p2-p1 ;
    Y2[i]= ((A3 * x+A2) * x+A1) * x+A0;
    }
  free( (char * )YD) ;
}

// Name : getYD_ gen ( ) .
// Function : Compute 1st derivaiives of data in X and Y(len entries).
// The not-a-knot boundary is used.
// Parameters : Y : is a list of irregular data points (len1 entries).
// X : x-coordinatcs of the adta stored in Y1.
// YD : output data (len entries) .
// Calls : tridiag_gen ( )

void getYD_gen (double * X ,doublc * Y ,double * YD ,int len)
{
  int i ;
  double h0,h1 ,r0,r1 , * A, * B, * C;
  A =(double * ) calloc (len , sizeof (double ) ) ;
  B =(double x ) calloc (len , sizeof(double) ) ;
  C =(double x ) calloc (len , sizeof(double ) ) ;
  h0 =X [1 ]-X [0] ;
  h1 =X [2]-X [1 ] ;
  r0 =(Y[1 ]-Y[0] ) /h0 ;
  r1 = (Y[2]-Y[1] ) /h1 ;
  B[0] =h1 * (h0+h1 ) ;
  C[0]=(h0+h1 ) * (h0+h1 ) ;
  YD[0]=r0 * (3 * h0 * h1+2 * h1 * h1)+r1 * h0 * h0;
  for (i = 1 ; i&lt;len-1 ; i + + )
    {
    h0 = X [i ]-X[i- 1 ] ;
    h1 =x [i + 1 ]-x [i] ;
    r0 = (Y [i]-y [i- 1 ] ) /h0 ;
    r1  (Y[i+ 1 ]-Y[i] ) /h1 ;
    A[I] = h1 ;
    B[i]= 2 * (h0+h1 ) ;
    C[i] = h0 ;
    YD[i] = 3 * (r0 * h1 + r1 * h0) ;
    }
  A[i] = (h0-h1 ) * (h0+h1 ) ;
  B[i] =h0 * (h0+h1 ) ;
  C[i] = h0 ;
  YD[i]=r0 * h1 * h1+r1 * (3 * h0 * h1+2 * h0 * h0) ;
  / * solve for the tridiagonal mairix. * /
  tridiag_gen ( A , B , C , YD , len ) ;
  free( (char * ) A) ;
  free( (char * ) B) ;
  free( (char * ) C) ;
}

// Name : tridiag_gen( ).
// Function : solve for the tridiagonal matrix using Gauss
// backsubstitution method.
// Parameters: A ,B ,C, D : is a list of store data Points (len entries).

void tridiag_gen (double * A , double * B , double * C ,double * D , int len )
{
  int i ;
  double b , * F ;
  F = (double * )calloc (len , sizeof(double ) ) ;
  b = B[0] /b ;
  D[0]= D[0] /b ;
  for ( i=1 ; i&lt; len ; i ++)
    {
    F[i] =C[i- 1 ] /b ;
    b= B[i]-A[i] * F[i] ;
    if(B =0)
      {
      printf ( "getYD_gen : divide by zero") ;
      exit ( 0 ) ;
      }
    D[i]= ( D[i]-D[i-1]* A [i] ) /b ;
    }
  for ( i=len- 2 ; i &gt;= 0 ; i-- )
    D[i]=(D[i+1]*F[i+1]);
  free ( (char * )F) ;
}</FONT>
</PRE></TD></TR></TBODY></TABLE><!-- #EndEditable -->
<TABLE borderColor=#00cccc cellSpacing=0 cellPadding=2 width=760 align=center 
border=1>
  <TBODY>
  <TR>
    <TD width=25><A title=返回页首 
      href="http://www.wavecn.com/_articles/insertvalue.htm#pagetop"><FONT 
      color=#fe5a28 size=5>▲</FONT></A></TD>
    <TD width=742>
      <DIV align=center>最佳浏览方式：800*600*16位色 4.0以上版本浏览器<BR>版权所有(c) 2000-2010 by 
      WaveCN.com, <A 
      href="mailto:webmaster@wavecn.com">webmaster@wavecn.com</A></DIV></TD></TR></TBODY></TABLE>
<CENTER><A href="http://www.asia-top.com/click?account=wavecn">
<SCRIPT language=Javascript>
document.write('<img border="0" src="http://track.asia-top.com/count?t=5&account=wavecn&rf='+escape(document.referrer)+'"></a>');
</SCRIPT>
</A></CENTER><!-- #BeginEditable "end" --><!-- #EndEditable --><!-- #EndTemplate --></BODY></HTML>
